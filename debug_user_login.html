<!DOCTYPE html>
<html>
<head>
    <title>Debug User Login</title>
</head>
<body>
    <h1>Debug User Login</h1>
    <div id="currentUser"></div>
    <br>
    <button onclick="setTestUser()">Set Test User (STU001)</button>
    <button onclick="setHakyUser()">Set Haky User (1103210016)</button>
    <button onclick="clearUser()">Clear User</button>
    <button onclick="checkUser()">Check Current User</button>

    <script>
        function setTestUser() {
            const testUser = {
                id: 'STU001',
                userId: 'STU001',
                name: 'Test Student',
                email: 'test.student@example.com',
                role: 'student'
            };
            localStorage.setItem('user', JSON.stringify(testUser));
            console.log('Set test user:', testUser);
            checkUser();
        }

        function setHakyUser() {
            const hakyUser = {
                id: '1103210016',
                userId: '1103210016',
                name: 'haky',
                email: 'haky@example.com',
                role: 'student'
            };
            localStorage.setItem('user', JSON.stringify(hakyUser));
            console.log('Set haky user:', hakyUser);
            checkUser();
        }

        function clearUser() {
            localStorage.removeItem('user');
            console.log('Cleared user');
            checkUser();
        }

        function checkUser() {
            const user = localStorage.getItem('user');
            const userDiv = document.getElementById('currentUser');
            if (user) {
                const parsed = JSON.parse(user);
                userDiv.innerHTML = `
                    <h3>Current User:</h3>
                    <p>ID: ${parsed.id}</p>
                    <p>User ID: ${parsed.userId}</p>
                    <p>Name: ${parsed.name}</p>
                    <p>Email: ${parsed.email}</p>
                    <p>Role: ${parsed.role}</p>
                `;
                console.log('Current user:', parsed);
            } else {
                userDiv.innerHTML = '<h3>No user logged in</h3>';
                console.log('No user logged in');
            }
        }

        // Check on page load
        checkUser();
    </script>
</body>
</html>
