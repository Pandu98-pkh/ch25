import{u as V,a as W,j as e}from"./index-CKUJbCT9.js";import{u as K,r as h,L as $}from"./react-vendor-aXCYw_-y.js";import{s as f,i as G,D as J,q as R,e as A,H as X,A as Z,o as ee}from"./ui-vendor-DRNSJ1fN.js";const d=["Little interest or pleasure in doing things","Feeling down, depressed, or hopeless","Trouble falling or staying asleep, or sleeping too much","Feeling tired or having little energy","Poor appetite or overeating","Feeling bad about yourself or that you are a failure or have let yourself or your family down","Trouble concentrating on things, such as reading the newspaper or watching television","Moving or speaking so slowly that other people could have noticed. Or the opposite â€” being so fidgety or restless that you have been moving around a lot more than usual","Thoughts that you would be better off dead or of hurting yourself in some way"],P=[{range:[0,4],level:"minimal",color:"green",description:"Minimal or no depression"},{range:[5,9],level:"mild",color:"blue",description:"Mild depression"},{range:[10,14],level:"moderate",color:"yellow",description:"Moderate depression"},{range:[15,19],level:"moderately severe",color:"orange",description:"Moderately severe depression"},{range:[20,27],level:"severe",color:"red",description:"Severe depression"}],j=[{value:0,label:"Not at all",description:"The symptom has not been present"},{value:1,label:"Several days",description:"The symptom has been present for several days"},{value:2,label:"More than half the days",description:"The symptom has been present for more than half the days"},{value:3,label:"Nearly every day",description:"The symptom has been present nearly every day"}];function se(){const{t:r}=V(),M=K(),{addAssessment:Q}=W(),[a,y]=h.useState(0),[l,E]=h.useState(Array(d.length).fill(-1)),N=300,[x,I]=h.useState(N),[b,H]=h.useState(!1),[p,T]=h.useState(!1),[v,k]=h.useState(!1),u=h.useRef(null);h.useEffect(()=>(u.current=window.setInterval(()=>{I(s=>s<=1?(u.current&&window.clearInterval(u.current),H(!0),0):s-1)},1e3),()=>{u.current&&window.clearInterval(u.current)}),[]),h.useEffect(()=>{if(b&&!p&&!v){const s=setTimeout(()=>{T(!0)},2e3);return()=>clearTimeout(s)}},[b,p,v]);const g=s=>{const i=Math.floor(s/60),t=s%60;return`${i.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},w=()=>N-x,L=()=>{const s=x,i=Math.floor(s/60),t=s%60;return s<=0?"Time's up!":i>0?`${i} ${i===1?"minute":"minutes"} ${t} ${t===1?"second":"seconds"} remaining`:`${t} ${t===1?"second":"seconds"} remaining`},D=()=>{const s=w(),i=Math.floor(s/60),t=s%60;return i>0?`${i} ${i===1?"minute":"minutes"} ${t} ${t===1?"second":"seconds"} to complete`:`${t} ${t===1?"second":"seconds"} to complete`},B=()=>x<=30?"bg-red-700 bg-opacity-50 text-red-100 animate-pulse":x<=60?"bg-red-600 bg-opacity-40 text-red-50":x<=120?"bg-yellow-600 bg-opacity-40 text-yellow-50":"bg-indigo-700 bg-opacity-30",U=s=>{const i=[...l];i[a]=s,E(i),setTimeout(()=>{a<d.length-1?y(a+1):p||(T(!0),u.current&&window.clearInterval(u.current))},300)},Y=()=>{a>0&&y(a-1)},O=()=>{a<d.length-1&&y(a+1)},S=()=>l.reduce((s,i)=>s+(i>=0?i:0),0),C=s=>P.find(i=>s>=i.range[0]&&s<=i.range[1])||P[0],F=s=>{switch(s){case"minimal":return"bg-green-100 text-green-800";case"mild":return"bg-blue-100 text-blue-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"moderately severe":return"bg-amber-100 text-amber-800";case"severe":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=(s,i)=>{const t=C(s);let o=`PHQ-9 Assessment Summary

Score: ${s} - ${t.level.charAt(0).toUpperCase()+t.level.slice(1)} Depression

`;const c=i.map((n,m)=>({value:n,question:d[m],index:m+1})).filter(n=>n.value>=2).sort((n,m)=>m.value-n.value);if(c.length>0){if(o+="Key Symptoms: The assessment shows significant concerns with ",c.length===1)o+=`"${c[0].question.toLowerCase()}" (Q${c[0].index}).`;else{const n=c.pop();o+=c.map(m=>`"${m.question.toLowerCase()}" (Q${m.index})`).join(", "),o+=` and "${n==null?void 0:n.question.toLowerCase()}" (Q${n==null?void 0:n.index}).`}o+=`

`}switch(i[8]>0&&(o+=`Risk Alert: The response to question 9 indicates thoughts of self-harm or suicide (score: ${i[8]}/3). This requires immediate attention and follow-up.

`),t.level){case"minimal":o+="Analysis: Symptoms suggest minimal or no depression. Regular monitoring is recommended to track any changes in mood or functioning.";break;case"mild":o+="Analysis: Mild depressive symptoms present. These might affect daily functioning but may respond well to self-help strategies and lifestyle modifications.";break;case"moderate":o+="Analysis: Moderate depression indicates clinical significance. Professional intervention would likely be beneficial, potentially including therapy approaches like CBT.";break;case"moderately severe":o+="Analysis: Moderately severe depression suggests significant impact on functioning. Both psychotherapy and medication consultation should be considered as part of a treatment plan.";break;case"severe":o+="Analysis: Severe depression indicates a serious condition requiring comprehensive treatment. Immediate professional evaluation is recommended for appropriate intervention planning.";break}return o},q=(s,i)=>{const t=[];return s<5?(t.push("Continue regular monitoring of mental health"),t.push("Practice maintaining good sleep hygiene and regular physical activity")):s<10?(t.push("Consider self-guided mental health resources and workbooks"),t.push("Maintain regular physical activity (30 minutes, 3-5 times per week)"),t.push("Establish consistent sleep schedule and stress management practices")):s<15?(t.push("Schedule follow-up with healthcare provider within 2-4 weeks"),t.push("Consider structured psychological interventions like cognitive behavioral therapy"),t.push("Begin daily mood tracking to identify patterns and triggers"),t.push("Review and enhance social support systems")):s<20?(t.push("Schedule prompt evaluation with mental health professional (within 1-2 weeks)"),t.push("Discuss combination treatment options including therapy and medication"),t.push("Implement regular check-ins with support person or healthcare provider"),t.push("Create structure in daily routine to support functioning")):(t.push("Seek immediate evaluation from mental health professional (within days)"),t.push("Comprehensive treatment plan including consideration of intensive therapy and medication"),t.push("Develop detailed safety plan with clear steps for crisis situations"),t.push("Ensure regular monitoring and frequent follow-up appointments")),i[2]>=2&&t.push("Improve sleep environment and establish consistent bedtime routine"),i[3]>=2&&t.push("Consider energy management strategies like activity pacing and scheduled rest periods"),i[4]>=2&&t.push("Monitor nutrition and establish regular eating patterns"),i[6]>=2&&t.push("Practice mindfulness and focused attention exercises to improve concentration"),i[8]>=1&&(t.unshift("Contact crisis services or healthcare provider immediately about thoughts of self-harm"),t.push("Create a written safety plan with emergency contacts and coping strategies")),t},z=()=>{const s=S(),i=s<10?"low":s<15?"moderate":"high";let t;s<8?t="improving":s<15?t="stable":t="worsening";const o=_(s,l.map(n=>n>=0?n:0)),c=q(s,l.map(n=>n>=0?n:0));Q({type:"PHQ-9",score:s,date:ee(new Date,"yyyy-MM-dd"),risk:i,notes:o,responses:l.map((n,m)=>({questionId:m+1,answer:n>=0?n:0})),mlPrediction:{trend:t,confidence:.75+Math.random()*.2,nextPredictedScore:Math.max(0,s+(t==="improving"?-2:t==="stable"?0:2))},recommendations:c}),console.log("Test completed and saved to local storage"),console.log("Navigating to mental health page");try{M("/mental-health",{replace:!0})}catch(n){console.error("Navigation error:",n),window.location.href="/mental-health"}};if(v){const s=S(),i=C(s),t=w(),o=q(s,l.map(c=>c>=0?c:0));return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:r("phq9.results","PHQ-9 Assessment Results")}),e.jsxs("div",{className:"text-indigo-100 flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[r("phq9.timeTaken","Time taken"),": ",g(t)]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 mb-6 border-b border-gray-200",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:s}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${F(i.level)}`,children:[i.level.charAt(0).toUpperCase()+i.level.slice(1)," Depression"]}),e.jsx("p",{className:"mt-3 text-gray-600 text-center",children:i.description}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[r("phq9.completionTime","Completion time"),": ",g(t)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Response Breakdown"}),e.jsx("div",{className:"space-y-4",children:d.map((c,n)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:[n+1,". ",c]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${l[n]===0?"bg-green-100 text-green-800":l[n]===1?"bg-blue-100 text-blue-800":l[n]===2?"bg-yellow-100 text-yellow-800":l[n]===3?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:l[n]}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:l[n]>=0&&l[n]<j.length?j[l[n]].label:"Not answered"})]})]},n))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg mb-6",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx(G,{className:"h-5 w-5 text-blue-600 mr-2"}),"Personalized Recommendations"]}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-700",children:o.map((c,n)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),c]},n))}),e.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Note: These recommendations are automatically generated based on your responses. Always consult with a healthcare professional for proper diagnosis and treatment."})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>k(!1),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Back to Assessment"]}),e.jsxs("button",{onClick:z,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700",children:["Save & Return",e.jsx(R,{className:"w-4 h-4 ml-2"})]})]})]})]})})})}if(p){const s=w();return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:e.jsx(A,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:r("phq9.completed","Assessment Completed")}),e.jsx("p",{className:"text-gray-600 text-center mb-2",children:r("phq9.completedMessage","You've completed the PHQ-9 depression assessment.")}),e.jsxs("div",{className:"bg-indigo-50 px-4 py-3 rounded-lg text-indigo-700 flex items-center mb-4",children:[e.jsx(f,{className:"h-5 w-5 mr-2 text-indigo-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g(s)}),e.jsx("p",{className:"text-xs text-indigo-600",children:D()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full mb-4",children:[e.jsx($,{to:"/mental-health",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 flex items-center justify-center",children:r("phq9.skipResults","Skip Results")}),e.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700",children:r("phq9.viewResults","View Results")})]})]})})})})})}return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[b&&!p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md mx-auto animate-bounce",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(f,{className:"h-8 w-8 text-red-600 mr-2"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Time's Up!"})]}),e.jsx("p",{className:"text-gray-700 mb-4 text-center",children:"Your time for the assessment has ended. Your responses will be submitted now."})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:r("phq9.title","PHQ-9 Depression Assessment")}),e.jsxs("div",{className:"text-indigo-100 flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-1.5"}),e.jsx("div",{className:`px-3 py-1.5 rounded-md font-mono font-medium ${B()}`,children:g(x)})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:r("phq9.instructions","Over the last 2 weeks, how often have you been bothered by the following problems?")}),e.jsx("p",{className:"text-xs text-indigo-200",children:L()})]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-1.5",children:e.jsx("div",{className:"bg-indigo-600 h-1.5 transition-all duration-300",style:{width:`${a/d.length*100}%`}})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-800 flex items-center justify-center font-semibold text-sm",children:a+1}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[r("phq9.questionNumber","Question")," ",a+1," ",r("phq9.of","of")," ",d.length]})]}),e.jsx($,{to:"/mental-health",className:"text-sm text-gray-500 hover:text-gray-700",children:r("phq9.exit","Exit")})]}),e.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-6",children:d[a]}),e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsx("div",{children:e.jsxs("button",{onClick:()=>U(s.value),className:`w-full text-left p-4 rounded-lg border transition-all duration-200 flex items-center ${l[a]===s.value?"border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"}`,children:[e.jsx("div",{className:`w-6 h-6 flex-shrink-0 rounded-full border flex items-center justify-center mr-3 ${l[a]===s.value?"border-indigo-500 bg-indigo-500 text-white":"border-gray-300"}`,children:l[a]===s.value&&e.jsx(A,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-500",children:s.description})]}),e.jsx("div",{className:"ml-auto text-lg font-semibold text-gray-400",children:s.value})]})},s.value))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:Y,disabled:a===0,className:`flex items-center px-4 py-2 text-sm font-medium rounded-md ${a===0?"text-gray-400 cursor-not-allowed":"text-gray-700 bg-white border border-gray-300 shadow-sm hover:bg-gray-50"}`,children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),r("phq9.previous","Previous")]}),e.jsxs("button",{onClick:O,disabled:a===d.length-1,className:`flex items-center px-4 py-2 text-sm font-medium rounded-md ${a===d.length-1?"text-gray-400 cursor-not-allowed":"text-gray-700 bg-white border border-gray-300 shadow-sm hover:bg-gray-50"}`,children:[r("phq9.next","Next"),e.jsx(R,{className:"w-4 h-4 ml-2"})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-white shadow-md rounded-xl p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx(Z,{className:"w-4 h-4 text-blue-600 mr-2"}),r("phq9.instructionsTitle","Instructions")]}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("li",{children:["â€¢ ",r("phq9.instruction1","Please answer all questions based on your experiences over the last 2 weeks")]}),e.jsxs("li",{children:["â€¢ ",r("phq9.instruction2","Select the option that best represents how often you've been bothered by each problem")]}),e.jsxs("li",{children:["â€¢ ",r("phq9.instruction3","You have 15 minutes to complete this assessment")]}),e.jsxs("li",{children:["â€¢ ",r("phq9.instruction4","You can navigate between questions using the Previous and Next buttons")]})]})]})]})]})}function re(){return e.jsx("div",{className:"flex h-screen bg-gray-100",children:e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(se,{})})})})}export{re as PHQ9TestWithNavigation,se as default};
