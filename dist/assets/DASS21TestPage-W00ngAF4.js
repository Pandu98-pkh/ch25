import{u as X,q as Z,j as e}from"./index-BPryJHl5.js";import{u as ee,r as o}from"./react-vendor-Brf1c7dg.js";import{s as se,$ as P,i as Q,aw as te,f as ne,I as L,ao as M,aF as re}from"./ui-vendor-iM6TVctI.js";const d=["I found it hard to wind down","I was aware of dryness of my mouth","I couldn't seem to experience any positive feeling at all","I experienced breathing difficulty (eg. excessively rapid breathing, breathlessness in the absence of physical exertion)","I found it difficult to work up the initiative to do things","I tended to over-react to situations","I experienced trembling (eg. in the hands)","I felt that I was using a lot of nervous energy","I was worried about situations in which I might panic and make a fool of myself","I felt that I had nothing to look forward to","I found myself getting agitated","I found it difficult to relax","I felt down-hearted and blue","I was intolerant of anything that kept me from getting on with what I was doing","I felt I was close to panic","I was unable to become enthusiastic about anything","I felt I wasn't worth much as a person","I felt that I was rather touchy","I was aware of the action of my heart in the absence of physical exertion (eg. sense of heart rate increase, heart missing a beat)","I felt scared without any good reason","I felt that life was meaningless"],C=["stress","anxiety","depression","anxiety","depression","stress","anxiety","stress","anxiety","depression","stress","stress","depression","stress","anxiety","depression","depression","stress","anxiety","anxiety","depression"],ae={depression:[{range:[0,9],level:"normal",color:"green"},{range:[10,13],level:"mild",color:"blue"},{range:[14,20],level:"moderate",color:"yellow"},{range:[21,27],level:"severe",color:"orange"},{range:[28,42],level:"extremely severe",color:"red"}],anxiety:[{range:[0,7],level:"normal",color:"green"},{range:[8,9],level:"mild",color:"blue"},{range:[10,14],level:"moderate",color:"yellow"},{range:[15,19],level:"severe",color:"orange"},{range:[20,42],level:"extremely severe",color:"red"}],stress:[{range:[0,14],level:"normal",color:"green"},{range:[15,18],level:"mild",color:"blue"},{range:[19,25],level:"moderate",color:"yellow"},{range:[26,33],level:"severe",color:"orange"},{range:[34,42],level:"extremely severe",color:"red"}]},O=[{value:0,text:"Did not apply to me at all"},{value:1,text:"Applied to me to some degree, or some of the time"},{value:2,text:"Applied to me to a considerable degree or a good part of time"},{value:3,text:"Applied to me very much or most of the time"}];function ce(){const{t:ie}=X(),F=ee(),{addAssessment:B}=Z(),[r,h]=o.useState(0),[m,T]=o.useState(Array(21).fill(-1)),[U,f]=o.useState(!1),[$,v]=o.useState(null),[y,b]=o.useState(!1),[x,D]=o.useState(5*60),[u,R]=o.useState(!0),q=()=>{const s=Math.floor(x/60),t=x%60;return`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`};o.useEffect(()=>{let s;return u&&x>0?s=setTimeout(()=>{D(t=>t-1)},1e3):x===0&&E(),()=>{s&&clearTimeout(s)}},[x,u]);const j=(s,t)=>{const n=ae[s];return n.find(l=>t>=l.range[0]&&t<=l.range[1])||n[0]},N=s=>{switch(s.color){case"green":return"bg-green-100 text-green-800";case"blue":return"bg-blue-100 text-blue-800";case"yellow":return"bg-yellow-100 text-yellow-800";case"orange":return"bg-amber-100 text-amber-800";case"red":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=s=>{const t=[...m];t[r]=s,T(t),r<d.length-1&&setTimeout(()=>{h(r+1)},300)},Y=()=>{const s={depression:0,anxiety:0,stress:0};return m.forEach((t,n)=>{const i=C[n];s[i]+=t*2}),s},G=()=>{r>0&&h(r-1)},z=()=>{r<d.length-1&&h(r+1)},E=async()=>{b(!0);const s=Y(),t=j("depression",s.depression),n=j("anxiety",s.anxiety),i=j("stress",s.stress),l={depression:N(t),anxiety:N(n),stress:N(i)},g=[t.level,n.level,i.level];let c="low";g.includes("extremely severe")||g.includes("severe")?c="high":g.includes("moderate")&&(c="moderate");const A={depression:s.depression<14?"improving":s.depression<21?"stable":"worsening",anxiety:s.anxiety<10?"improving":s.anxiety<15?"stable":"worsening",stress:s.stress<19?"improving":s.stress<26?"stable":"worsening"},a=[];t.level==="normal"||t.level==="mild"?a.push("Continue monitoring depression symptoms"):t.level==="moderate"?(a.push("Consider psychoeducation and self-help resources for depression"),a.push("Regular monitoring of mood and engagement in pleasant activities")):(a.push("Consult with a mental health professional for depression evaluation"),a.push("Consider evidence-based interventions such as CBT or behavioral activation")),n.level==="normal"||n.level==="mild"?a.push("Practice regular relaxation techniques for anxiety management"):n.level==="moderate"?(a.push("Consider anxiety management strategies such as deep breathing and progressive muscle relaxation"),a.push("Regular exercise may help reduce anxiety symptoms")):(a.push("Consult with a mental health professional for anxiety assessment"),a.push("Consider evidence-based interventions such as CBT or mindfulness-based approaches")),i.level==="normal"||i.level==="mild"?a.push("Continue practicing good stress management techniques"):i.level==="moderate"?(a.push("Implement regular stress reduction activities in daily routine"),a.push("Consider time management strategies and setting boundaries")):(a.push("Consult with a healthcare provider about stress management approaches"),a.push("Consider lifestyle modifications to reduce stress burden"));const J=m.map((I,k)=>({questionId:k+1,category:C[k],question:d[k],answer:I})),W=`DASS-21 Assessment Analysis:
    
Depression Score: ${s.depression}/42 - Severity: ${t.level}
Anxiety Score: ${s.anxiety}/42 - Severity: ${n.level}
Stress Score: ${s.stress}/42 - Severity: ${i.level}

Key Findings:
- ${t.level!=="normal"?`Depression symptoms present at ${t.level} levels`:"Depression symptoms within normal range"}
- ${n.level!=="normal"?`Anxiety symptoms present at ${n.level} levels`:"Anxiety symptoms within normal range"}
- ${i.level!=="normal"?`Stress indicators at ${i.level} levels`:"Stress indicators within normal range"}

Clinical Considerations:
${t.level!=="normal"?"- Monitor for persistent low mood, anhedonia, and changes in sleep/appetite":""}
${n.level!=="normal"?"- Assess for physiological arousal, excessive worry, and avoidance behaviors":""}
${i.level!=="normal"?"- Evaluate sources of stress and coping mechanisms":""}

Recommended clinical actions:
${a.join(`
`)}

Follow-up recommendation: ${c==="high"?"1-2 weeks":c==="moderate"?"2-4 weeks":"2-3 months"}`,p={type:"DASS-21",score:s.depression+s.anxiety+s.stress,date:se(new Date,"yyyy-MM-dd"),risk:c,notes:W,responses:J,mlPrediction:{trend:A.depression,confidence:.65+Math.random()*.3,nextPredictedScore:Math.max(0,s.depression+(A.depression==="improving"?-3:A.depression==="stable"?0:3))},recommendations:a,subScores:{depression:s.depression,anxiety:s.anxiety,stress:s.stress},severityLevels:{depression:t.level,anxiety:n.level,stress:i.level},severityColors:l};console.log("DASS-21 Test completed, saving assessment:",p);try{v(p),await B(p),console.log("DASS-21 Assessment saved successfully to database"),f(!0),b(!1)}catch(I){console.error("Error saving DASS-21 assessment:",I),v(p),f(!0),b(!1)}},H=()=>{T(Array(21).fill(-1)),h(0),f(!1),v(null),D(5*60),R(!0)},w=()=>{F("/app/mental-health")},S=()=>m.every(s=>s!==-1),K=()=>{const s=d[r],t=C[r];return{question:s,category:t}},V=()=>{R(!u)};if(U&&$){const{subScores:s,severityLevels:t,severityColors:n,recommendations:i,mlPrediction:l}=$;return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx("button",{onClick:w,className:"mr-4 p-2 rounded-full hover:bg-gray-100 transition-colors duration-200",children:e.jsx(P,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"DASS-21 Assessment Results"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(Q,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Assessment Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Depression"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:[s.depression,"/42"]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.depression}`,children:t.depression}),l&&e.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[e.jsx(te,{className:`h-4 w-4 mr-1.5 ${l.trend==="improving"?"text-green-500":l.trend==="stable"?"text-blue-500":"text-red-500"}`}),e.jsxs("span",{className:"text-gray-600",children:["Trend: ",l.trend==="improving"?"Improving":l.trend==="stable"?"Stable":"Needs Attention"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Anxiety"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:[s.anxiety,"/42"]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.anxiety}`,children:t.anxiety})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Stress"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:[s.stress,"/42"]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.stress}`,children:t.stress})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Clinical Recommendations"}),e.jsx("ul",{className:"space-y-2",children:i.map((g,c)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(ne,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-600",children:g})]},c))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-center space-y-4 sm:space-y-0",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Take Assessment Again"}),e.jsx("button",{onClick:w,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Return to Dashboard"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Understanding Your Results"}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-600",children:[e.jsx("p",{children:"The Depression Anxiety Stress Scale (DASS-21) is a set of three self-report scales designed to measure the emotional states of depression, anxiety and stress."}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Depression Scale"}),e.jsx("p",{children:"This scale assesses dysphoria, hopelessness, devaluation of life, self-deprecation, lack of interest/involvement, anhedonia, and inertia."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Anxiety Scale"}),e.jsx("p",{children:"This scale assesses autonomic arousal, skeletal muscle effects, situational anxiety, and subjective experience of anxious affect."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Stress Scale"}),e.jsx("p",{children:"This scale is sensitive to levels of chronic non-specific arousal. It assesses difficulty relaxing, nervous arousal, and being easily upset/agitated, irritable/over-reactive and impatient."})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg flex items-start",children:[e.jsx(L,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-blue-700",children:"These results are intended for screening purposes only and do not constitute a clinical diagnosis. Please consult with a qualified healthcare professional for a comprehensive evaluation."})]})]})]})})]})}return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:w,className:"mr-4 p-2 rounded-full hover:bg-gray-100 transition-colors duration-200",children:e.jsx(P,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"DASS-21 Assessment"})]}),e.jsxs("div",{className:`flex items-center ${x<60?"text-red-600":"text-gray-700"}`,children:[e.jsx("button",{onClick:V,className:"p-1 mr-2 rounded-full hover:bg-gray-100",title:u?"Pause timer":"Resume timer",children:u?"⏸️":"▶️"}),e.jsx("span",{className:"font-mono text-lg font-bold",children:q()})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(Q,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Depression, Anxiety and Stress Scale"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Assess your levels of depression, anxiety, and stress"})]})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-500",children:["Question ",r+1," of ",d.length]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-amber-50 rounded-lg flex items-start",children:[e.jsx(M,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-amber-700",children:["Please read each statement and select a number 0, 1, 2 or 3 which indicates how much the statement applied to you ",e.jsx("strong",{children:"over the past week"}),". You have ",e.jsx("strong",{children:q()})," to complete all questions."]}),e.jsx("p",{className:"text-sm text-amber-700 mt-2",children:e.jsx("strong",{children:"The rating scale is as follows:"})}),e.jsx("ul",{className:"text-sm text-amber-700 mt-1 space-y-1",children:O.map(s=>e.jsxs("li",{children:[s.value," = ",s.text]},s.value))})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"relative w-full bg-gray-200 h-2 rounded-full mb-2",children:e.jsx("div",{className:"absolute top-0 left-0 h-2 bg-indigo-600 rounded-full",style:{width:`${(r+1)/d.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Start"}),e.jsx("span",{children:"Progress"}),e.jsx("span",{children:"Finish"})]})]}),e.jsx("div",{className:"space-y-6",children:(()=>{const{question:s,category:t}=K();return e.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("div",{className:"bg-gray-100 px-2 py-1 rounded text-xs text-gray-600 uppercase tracking-wide font-semibold",children:t})}),e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[r+1,". ",s]}),e.jsxs("div",{className:"ml-2 relative group",children:[e.jsx(re,{className:"h-4 w-4 text-gray-400 cursor-help"}),e.jsxs("div",{className:"absolute z-10 hidden group-hover:block w-64 bg-black text-white text-xs rounded py-1 px-2 right-0 top-0",children:["This question helps assess your ",t," level."]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:O.map(n=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",id:`q${r}-${n.value}`,name:`question-${r}`,className:"sr-only peer",checked:m[r]===n.value,onChange:()=>_(n.value)}),e.jsxs("label",{htmlFor:`q${r}-${n.value}`,className:"flex flex-col items-center p-4 border rounded-lg text-sm cursor-pointer peer-checked:bg-indigo-50 peer-checked:border-indigo-500 peer-checked:text-indigo-700 hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"font-bold text-2xl mb-2",children:n.value}),e.jsx("span",{className:"text-center",children:n.text})]})]},n.value))})]})})()}),e.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[e.jsx("button",{onClick:G,disabled:r===0,className:`px-4 py-2 border rounded-md text-sm font-medium ${r===0?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:"Previous"}),r<d.length-1?e.jsx("button",{onClick:z,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Next"}):e.jsx("button",{onClick:E,disabled:!S()||y,className:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium ${S()&&!y?"bg-green-600 text-white hover:bg-green-700":"bg-green-300 text-white cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`,children:y?"Submitting...":"Submit Assessment"})]}),!S()&&r===d.length-1&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg text-sm text-yellow-700",children:e.jsxs("p",{className:"flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Please answer all questions before submitting. Go back and check for any unanswered questions."]})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6 p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Question Navigation"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:m.map((s,t)=>e.jsx("button",{onClick:()=>h(t),className:`h-10 w-10 rounded-full flex items-center justify-center text-sm font-medium
                ${r===t?"ring-2 ring-offset-2 ring-indigo-500":""}
                ${s!==-1?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-500 border border-gray-300"}`,children:t+1},t))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"About DASS-21"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-3",children:[e.jsx("p",{children:"The Depression, Anxiety and Stress Scale - 21 Items (DASS-21) is a set of three self-report scales designed to measure the emotional states of depression, anxiety and stress."}),e.jsx("p",{children:"Each of the three DASS-21 scales contains 7 items, divided into subscales with similar content. The depression scale assesses dysphoria, hopelessness, devaluation of life, self-deprecation, lack of interest/involvement, anhedonia, and inertia. The anxiety scale assesses autonomic arousal, skeletal muscle effects, situational anxiety, and subjective experience of anxious affect. The stress scale is sensitive to levels of chronic non-specific arousal."}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg flex items-start",children:[e.jsx(L,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-blue-700",children:"This self-assessment is not a diagnostic tool. If you're experiencing significant distress, please consult with a qualified healthcare professional."})]})]})]})})]})}export{ce as default};
