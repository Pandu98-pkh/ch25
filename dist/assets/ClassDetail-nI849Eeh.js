import{i as q,j as e,c as u,k as J,u as Q,a as Z}from"./index-DSnDXcoI.js";import{r as d,e as ee,u as se}from"./react-vendor-BzbKlFBU.js";import{b as ae,d as te}from"./classService-6RIN8FzF.js";import{S as re}from"./StudentTable-D6Rc6cyz.js";import{W as le,X as ie,v as H,Q as ne,U as B,t as I,A as D,r as X,E as Y,$ as de,Z as K,q as _,Y as oe,a0 as ce,N as me,O as xe,k as ge,n as V,w as he}from"./ui-vendor-BdkMv6fW.js";const ue={good:{color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200",icon:Y,label:"Baik"},warning:{color:"text-yellow-700",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",icon:X,label:"Perhatian"},critical:{color:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-200",icon:D,label:"Kritis"}};function be({isOpen:l,onClose:b,onSuccess:t,classData:n}){const[m,o]=d.useState("select"),[y,C]=d.useState([]),[c,p]=d.useState(new Set),[j,f]=d.useState([]),[z,N]=d.useState(!1),[E,U]=d.useState(!1),[R,x]=d.useState(null),[v,k]=d.useState("");d.useEffect(()=>{l&&A()},[l]);const A=async()=>{try{N(!0),x(null);const a=await q();C(a||[])}catch(a){console.error("Error loading non-student users:",a),x("Gagal memuat data pengguna")}finally{N(!1)}},g=y.filter(a=>a.name.toLowerCase().includes(v.toLowerCase())||a.email.toLowerCase().includes(v.toLowerCase())),w=(a,r)=>{const s=new Set(c);r?s.add(a):s.delete(a),p(s)},P=()=>{if(c.size===g.length)p(new Set);else{const a=g.map(r=>r.id).filter(r=>!!r);p(new Set(a))}},L=(a,r)=>{f(s=>s.map(i=>i.id===a?{...i,academicStatus:r}:i))},F=()=>{const r=y.filter(s=>s.id&&c.has(s.id)).map(s=>({...s,academicStatus:"good"}));f(r),o("review")},S=async()=>{try{U(!0),x(null);const a=j.map(r=>({userId:r.id,name:r.name,email:r.email,tingkat:n.gradeLevel,kelas:n.name,academicStatus:r.academicStatus,classId:n.id}));await J(a),t(),T()}catch(a){console.error("Error saving students:",a),x("Gagal menyimpan data siswa")}finally{U(!1)}},T=()=>{o("select"),p(new Set),f([]),k(""),x(null),b()};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(le,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tambah Siswa Batch"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Kelas: ",n.name," • Tingkat: ",n.gradeLevel]})]})]}),e.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ie,{className:"h-5 w-5 text-gray-500"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:u("flex items-center space-x-2 px-3 py-1.5 rounded-full text-sm font-medium",m==="select"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700"),children:[e.jsx("div",{className:u("w-2 h-2 rounded-full",m==="select"?"bg-indigo-600":"bg-green-600")}),"Pilih Pengguna"]}),e.jsx(H,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:u("flex items-center space-x-2 px-3 py-1.5 rounded-full text-sm font-medium",m==="review"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-500"),children:[e.jsx("div",{className:u("w-2 h-2 rounded-full",m==="review"?"bg-indigo-600":"bg-gray-400")}),"Review & Simpan"]})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[R&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:R})}),m==="select"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari pengguna...",value:v,onChange:a=>k(a.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsx("button",{onClick:P,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors",children:c.size===g.length?"Batal Pilih Semua":"Pilih Semua"})]}),z?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Memuat data..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:v?"Tidak ada pengguna yang sesuai":"Semua pengguna sudah menjadi siswa"})]}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:c.size===g.length&&g.length>0,onChange:P,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pengguna"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"})]})}),"                    ",e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:["                      ",g.map(a=>{if(!a.id)return null;const r=a.id;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:c.has(r),onChange:s=>w(r,s.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center mr-3",children:e.jsx(I,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:a.name})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 capitalize",children:a.role})]},r)})]})]})}),c.size>0&&e.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-indigo-700 font-medium",children:[c.size," pengguna dipilih"]})})]}),m==="review"&&e.jsxs("div",{className:"space-y-4",children:["              ",e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Detail Penambahan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Kelas:"}),e.jsx("span",{className:"ml-2 text-blue-800",children:n.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Tingkat:"}),e.jsx("span",{className:"ml-2 text-blue-800",children:n.gradeLevel})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Jumlah Siswa:"}),e.jsx("span",{className:"ml-2 text-blue-800",children:j.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Tahun Akademik:"}),e.jsx("span",{className:"ml-2 text-blue-800",children:n.academicYear})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded border-l-4 border-blue-400",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Info:"})," User ID dari sistem user management akan digunakan sebagai Student ID (NIS) untuk menjaga konsistensi data."]})})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:["                  ",e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Siswa"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID → NIS"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Akademik"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:["                    ",j.map(a=>{if(!a.id)return null;const r=a.id;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center mr-3",children:e.jsx(I,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:a.name})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 font-mono",children:r}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("select",{value:a.academicStatus,onChange:s=>L(r,s.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(ue).map(([s,i])=>e.jsx("option",{value:s,children:i.label},s))})})]},r)})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex items-center space-x-3",children:m==="review"&&e.jsxs("button",{onClick:()=>o("select"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Kembali"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Batal"}),m==="select"?e.jsxs("button",{onClick:F,disabled:c.size===0,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Lanjut",e.jsx(H,{className:"h-4 w-4 ml-2"})]}):e.jsx("button",{onClick:S,disabled:E,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Simpan Siswa"]})})]})]})]})}):null}function O({student:l,status:b,statusCfg:t,avatarPath:n,onStudentClick:m,t:o}){const[y,C]=d.useState(!1);return e.jsxs("div",{onClick:()=>m(l),className:`bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 \r
                cursor-pointer overflow-hidden group border border-gray-200 relative transform hover:-translate-y-1`,children:[e.jsx("div",{className:u("h-1.5 w-full absolute top-0 left-0",t.bgColor)}),e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:e.jsx("button",{onClick:c=>{c.stopPropagation(),m(l)},className:"p-1.5 rounded-full bg-white shadow-md border border-gray-200 text-gray-600 hover:text-indigo-600 hover:border-indigo-300 transition-colors",title:o("actions.viewProfile","View Profile"),children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"p-5 pt-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[y?e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center ring-2 ring-gray-100 group-hover:ring-indigo-200 transition-all",children:e.jsx(I,{className:"h-8 w-8 text-indigo-400"})}):e.jsx("img",{src:n,alt:l.name,className:"h-16 w-16 rounded-full object-cover ring-2 ring-gray-100 group-hover:ring-indigo-200 transition-all duration-300",onError:()=>C(!0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-indigo-700 transition-colors duration-200 truncate",children:l.name}),e.jsxs("div",{className:u("px-2.5 py-1 rounded-full text-xs font-medium flex items-center",t.bgColor,t.color,`border ${t.borderColor}`),children:[e.jsx(t.icon,{className:"w-3.5 h-3.5 mr-1"}),o(`status.${b}`)]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[e.jsx(V,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-400"}),o("students.tingkat")," ",l.tingkat||l.grade," • ",o("students.kelas")," ",l.kelas||l.class]})]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 border border-gray-100 transition-all duration-200 group-hover:border-indigo-100",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[e.jsx(he,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-400"}),o("studentDetail.email")]}),e.jsx("p",{className:"font-medium text-sm text-gray-700 truncate",children:l.email||"No email"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 border border-gray-100 transition-all duration-200 group-hover:border-indigo-100",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[e.jsx(I,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-400"}),o("studentDetail.studentId","Student ID")]}),e.jsx("p",{className:"font-medium text-sm text-gray-700 truncate",children:l.studentId||l.id||"N/A"})]})]}),(l.mentalHealthScore!==void 0||l.lastCounseling)&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.mentalHealthScore!==void 0&&e.jsxs("div",{className:"p-3 rounded-lg bg-indigo-50 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:o("studentDetail.mentalHealthScore")}),e.jsxs("span",{className:"text-sm font-bold text-indigo-700",children:[l.mentalHealthScore,"/100"]})]}),e.jsx("div",{className:"mt-2 h-1.5 w-full bg-indigo-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${l.mentalHealthScore}%`}})})]}),l.lastCounseling&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex items-center",children:[e.jsx(X,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-400"}),o("studentDetail.lastCounseling"),": ",e.jsx("span",{className:"ml-1 font-medium text-gray-700",children:l.lastCounseling})]})]})]})]})}const G={X:{bg:"bg-blue-50",text:"text-blue-700",gradient:"from-blue-500 to-cyan-400",border:"border-blue-200",icon:V},XI:{bg:"bg-purple-50",text:"text-purple-700",gradient:"from-purple-500 to-pink-400",border:"border-purple-200",icon:K},XII:{bg:"bg-green-50",text:"text-green-700",gradient:"from-green-500 to-emerald-400",border:"border-green-200",icon:ge},default:{bg:"bg-indigo-50",text:"text-indigo-700",gradient:"from-indigo-500 to-blue-400",border:"border-indigo-200",icon:K}},$={good:{color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200",icon:Y},warning:{color:"text-yellow-700",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",icon:X},critical:{color:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-200",icon:D}};function ye(){const{id:l}=ee(),b=se(),{t}=Q(),[n,m]=d.useState(null),[o,y]=d.useState([]),[C,c]=d.useState(!0),[p,j]=d.useState(null),[f,z]=d.useState(""),[N,E]=d.useState("all"),[U,R]=d.useState(0),[x,v]=d.useState("table"),[k,A]=d.useState(!1),g=3,w=d.useCallback(async()=>{if(l)try{c(!0),j(null);const{clearTimeout:s}=Z(15e3),i=await ae(l);m(i);const h=await te(l);h&&h.students&&y(h.students),s()}catch(s){console.error("Error loading class data:",s),j(s instanceof Error?s.message:t("errors.loadingClass")||"Gagal memuat data kelas")}finally{c(!1)}},[l,t]);d.useEffect(()=>{w()},[w]);const P=()=>{U<g?(R(s=>s+1),w()):j(t("errors.maxRetriesReached")||"Batas percobaan telah tercapai")},L=s=>{b(`/app/students/${s.studentId||s.id}`)},F=()=>{A(!1),w()},S=o.filter(s=>{const i=s.name.toLowerCase().includes(f.toLowerCase()),h=N==="all"||s.academicStatus===N;return i&&h}),T=()=>{var i;if(!n)return G.default;const s=((i=n.gradeLevel.split(" ")[0])==null?void 0:i.trim().toUpperCase())||"";return G[s]||G.default},a=()=>`/api/classes/${l}/report`;if(C)return e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-7 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]}),e.jsx("div",{className:"h-40 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((s,i)=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-xl"},i))}),e.jsx("div",{className:"h-12 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((s,i)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded-xl"},i))})]});if(p||!n)return e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-red-100",children:[e.jsx(D,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium mb-4",children:p||t("errors.classNotFound")}),e.jsxs("div",{className:"flex justify-center space-x-4",children:["          ",e.jsxs("button",{onClick:()=>b("/app/classes"),className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsx(_,{className:"h-4 w-4 inline mr-2"}),t("actions.backToClasses")]}),e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4 inline mr-2"}),t("actions.retry")]})]})]});const r=T();return e.jsxs("div",{className:"space-y-6",children:["      ",e.jsxs("button",{onClick:()=>b("/app/classes"),className:"inline-flex items-center text-indigo-600 hover:text-indigo-800 transition-colors mb-4",children:[e.jsx(_,{className:"h-5 w-5 mr-1"}),t("classes.backToClasses")]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r ${r.gradient}`}),e.jsxs("div",{className:"flex items-start md:items-center flex-col md:flex-row md:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-br ${r.gradient} shadow-sm`,children:e.jsx(r.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.bg} ${r.text} border ${r.border}`,children:n.gradeLevel}),e.jsx("span",{className:"mx-2 text-gray-300",children:"•"}),e.jsx("span",{className:"text-sm text-gray-600",children:n.academicYear})]})]})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-3",children:[e.jsxs("button",{onClick:()=>A(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-sm transition-all duration-200 transform hover:scale-105",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),t("classes.addStudents","Tambah Siswa")]}),e.jsxs("a",{href:a(),download:`${n.name}-report.pdf`,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-sm transition-all duration-200 transform hover:scale-105",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),t("classes.downloadReport")]})]})]}),n.teacherName&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:t("classes.teacher")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.teacherName})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 transform transition-all duration-300 hover:shadow-md hover:border-indigo-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg mr-4",children:e.jsx(B,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:t("classes.studentCount")}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:o.length})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 transform transition-all duration-300 hover:shadow-md hover:border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg mr-4",children:e.jsx(Y,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:t("classes.goodStatus")}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-green-600",children:o.filter(s=>s.academicStatus==="good").length})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 transform transition-all duration-300 hover:shadow-md hover:border-red-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-red-50 rounded-lg mr-4",children:e.jsx(D,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:t("classes.needsAttention")}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-red-600",children:o.filter(s=>s.academicStatus==="warning"||s.academicStatus==="critical").length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t("classes.students")}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>v("table"),className:u("p-2 rounded-md transition-colors",x==="table"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:t("view.table")||"Tampilan Tabel",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v("cards"),className:u("p-2 rounded-md transition-colors",x==="cards"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:t("view.cards")||"Tampilan Kartu",children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex space-x-2",children:["all","good","warning","critical"].map(s=>e.jsx("button",{onClick:()=>E(s),className:u("px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200",N===s?s==="all"?"bg-indigo-600 text-white":s==="good"?"bg-green-600 text-white":s==="warning"?"bg-yellow-600 text-white":"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t(s==="all"?"status.all":`status.${s}`)},s))})]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("input",{type:"text",placeholder:t("students.search"),value:f,onChange:s=>z(s.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),S.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(B,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:t(f||N!=="all"?"students.noResults":"students.noStudents")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:x==="table"?e.jsx(re,{students:S,onClick:L}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(s=>{const i=s.academicStatus||"warning",h=$[i]||$.warning,M=s.avatar||s.photo||"/assets/images/default-avatar.png";return e.jsx(O,{student:s,status:i,statusCfg:h,avatarPath:M,onStudentClick:L,t},s.id)})})}),e.jsxs("div",{className:"block md:hidden",children:["                ",e.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.map(s=>{const i=s.academicStatus||"warning",h=$[i]||$.warning,M=s.avatar||s.photo||"/assets/images/default-avatar.png";return e.jsx(O,{student:s,status:i,statusCfg:h,avatarPath:M,onStudentClick:L,t},s.id)})})]})]})]})}),k&&e.jsx(be,{isOpen:k,onClose:()=>A(!1),onSuccess:F,classData:n})]})}export{ye as default};
