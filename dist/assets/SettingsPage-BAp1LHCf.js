import{u as F,o as A,j as e,q as B}from"./index-CdZ0Um37.js";import{u as D,r as c}from"./react-vendor-BzbKlFBU.js";import{t as u}from"./toast-M3i0mrg7.js";import{o as I,aW as U,aX as q,aY as G,B as z,f as j,G as K,aC as Z,aZ as v,a1 as k}from"./ui-vendor-CCWSLpt1.js";function V(){const{t:s,language:f,setLanguage:S}=F(),{user:N,isAdmin:$}=A(),L=D(),[i,P]=c.useState({email:!0,desktop:!0,mentionEmail:!1,mentionDesktop:!0}),[l,E]=c.useState(!1),[t,w]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,d]=c.useState({current:!1,new:!1,confirm:!1}),[y,b]=c.useState(!1);c.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);const C=a=>{S(a)},r=(a=>{let o=0;const p={length:a.length>=8,lowercase:/[a-z]/.test(a),uppercase:/[A-Z]/.test(a),numbers:/\d/.test(a),symbols:/[^A-Za-z0-9]/.test(a)};o=Object.values(p).filter(Boolean).length;let x="Sangat Lemah",g="bg-red-500",h="20%";return o>=5?(x="Sangat Kuat",g="bg-green-500",h="100%"):o>=4?(x="Kuat",g="bg-blue-500",h="80%"):o>=3?(x="Sedang",g="bg-yellow-500",h="60%"):o>=2&&(x="Lemah",g="bg-orange-500",h="40%"),{strength:x,color:g,width:h,checks:p,score:o}})(t.newPassword),m=t.confirmPassword&&t.newPassword===t.confirmPassword,M=async a=>{if(a.preventDefault(),!N){u.error(s("settings.userNotLoggedIn","User not logged in"));return}if(b(!0),t.newPassword!==t.confirmPassword){u.error(s("settings.passwordsDontMatch","New password and confirm password do not match.")),b(!1);return}if(t.newPassword.length<6){u.error(s("settings.passwordTooShort","Password must be at least 6 characters long")),b(!1);return}try{await B(N.userId,{...N,password:t.newPassword}),u.success(s("profile.passwordChanged","Password changed successfully")),w({currentPassword:"",newPassword:"",confirmPassword:""})}catch(o){const p=o instanceof Error?o.message:"Error changing password";u.error(s("settings.passwordChangeError",p))}finally{b(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl px-8 py-6 shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s("settings.title")}),e.jsx("p",{className:"mt-2 text-indigo-100 max-w-3xl",children:s("settings.subtitle")})]}),e.jsxs("div",{className:"bg-white shadow-xl rounded-xl overflow-hidden mb-8 border border-gray-100",children:[$&&e.jsx("div",{className:"p-4 bg-indigo-50 border-b border-indigo-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-indigo-700",children:s("settings.adminSettings","Admin Settings")})]}),e.jsx("button",{onClick:()=>L("/app/user-management"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:s("settings.goToUserManagement","Go to User Management")})]})}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center text-white shadow-md",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 ml-3",children:s("settings.appearance")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 bg-gray-200",role:"switch","aria-checked":l,onClick:()=>E(!l),children:e.jsx("span",{className:`pointer-events-none relative inline-block h-6 w-6 transform rounded-full shadow ring-0 transition duration-200 ease-in-out ${l?"translate-x-7 bg-brand-600":"translate-x-0 bg-white"}`,children:l?e.jsx(q,{className:"h-4 w-4 absolute top-1 left-1 text-white"}):e.jsx(G,{className:"h-4 w-4 absolute top-1 left-1 text-yellow-500"})})}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:s("settings.darkMode")})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-red-500 to-pink-500 rounded-lg flex items-center justify-center text-white shadow-md",children:e.jsx(z,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 ml-3",children:s("settings.notifications")})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-notifications",className:"text-sm font-medium text-gray-800 block",children:s("settings.emailNotifications")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive email updates about your account activity"})]}),e.jsx("div",{className:"relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 bg-gray-200",role:"switch","aria-checked":i.email,id:"email-notifications",onClick:()=>P({...i,email:!i.email}),children:e.jsx("span",{className:`pointer-events-none relative inline-block h-6 w-6 transform rounded-full shadow ring-0 transition duration-200 ease-in-out ${i.email?"translate-x-7 bg-brand-600":"translate-x-0 bg-white"}`,children:i.email&&e.jsx(j,{className:"h-4 w-4 absolute top-1 left-1 text-white"})})})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"desktop-notifications",className:"text-sm font-medium text-gray-800 block",children:s("settings.desktopNotifications")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show desktop notifications for important updates"})]}),e.jsx("div",{className:"relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 bg-gray-200",role:"switch","aria-checked":i.desktop,id:"desktop-notifications",onClick:()=>P({...i,desktop:!i.desktop}),children:e.jsx("span",{className:`pointer-events-none relative inline-block h-6 w-6 transform rounded-full shadow ring-0 transition duration-200 ease-in-out ${i.desktop?"translate-x-7 bg-brand-600":"translate-x-0 bg-white"}`,children:i.desktop&&e.jsx(j,{className:"h-4 w-4 absolute top-1 left-1 text-white"})})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center text-white shadow-md",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 ml-3",children:s("settings.language")})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>C("en"),className:`px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center ${f==="en"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md transform scale-105":"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full mr-2 border-2 overflow-hidden ${f==="en"?"border-white":"border-gray-200"}`,children:e.jsx("div",{className:"w-full h-full bg-blue-600 flex items-center justify-center text-xs font-bold text-white",children:"EN"})}),"English"]}),e.jsxs("button",{onClick:()=>C("id"),className:`px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center ${f==="id"?"bg-gradient-to-r from-red-600 to-red-500 text-white shadow-md transform scale-105":"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full mr-2 border-2 overflow-hidden ${f==="id"?"border-white":"border-gray-200"}`,children:e.jsx("div",{className:"w-full h-full bg-red-600 flex items-center justify-center text-xs font-bold text-white",children:"ID"})}),"Indonesia"]})]})})]}),"          ",e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white shadow-md",children:e.jsx(Z,{className:"h-5 w-5"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("settings.changePassword")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gunakan password yang kuat untuk keamanan akun Anda"})]})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"text-sm font-medium text-gray-800 block",children:s("settings.currentPassword")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.current?"text":"password",id:"current-password",value:t.currentPassword,onChange:a=>w({...t,currentPassword:a.target.value}),className:"block w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-brand-600 focus:outline-none text-sm",placeholder:s("settings.enterCurrentPassword"),required:!0}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm",children:n.current?e.jsx(v,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,current:!1})}):e.jsx(k,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,current:!0})})})]})]}),"              ",e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"text-sm font-medium text-gray-800 block",children:s("settings.newPassword")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.new?"text":"password",id:"new-password",value:t.newPassword,onChange:a=>w({...t,newPassword:a.target.value}),className:"block w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-brand-600 focus:outline-none text-sm",placeholder:s("settings.enterNewPassword"),required:!0}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm",children:n.new?e.jsx(v,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,new:!1})}):e.jsx(k,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,new:!0})})})]}),t.newPassword&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Kekuatan Password:"}),e.jsx("span",{className:`text-xs font-medium ${r.score>=4?"text-green-600":r.score>=3?"text-blue-600":r.score>=2?"text-yellow-600":"text-red-600"}`,children:r.strength})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${r.color}`,style:{width:r.width}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:`flex items-center ${r.checks.length?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r.checks.length?"bg-green-500":"bg-gray-300"}`}),"Min 8 karakter"]}),e.jsxs("div",{className:`flex items-center ${r.checks.uppercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r.checks.uppercase?"bg-green-500":"bg-gray-300"}`}),"Huruf besar"]}),e.jsxs("div",{className:`flex items-center ${r.checks.lowercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r.checks.lowercase?"bg-green-500":"bg-gray-300"}`}),"Huruf kecil"]}),e.jsxs("div",{className:`flex items-center ${r.checks.numbers?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r.checks.numbers?"bg-green-500":"bg-gray-300"}`}),"Angka"]}),e.jsxs("div",{className:`flex items-center ${r.checks.symbols?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r.checks.symbols?"bg-green-500":"bg-gray-300"}`}),"Simbol"]})]})]})]}),"              ",e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"text-sm font-medium text-gray-800 block",children:s("settings.confirmPassword")}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.confirm?"text":"password",id:"confirm-password",value:t.confirmPassword,onChange:a=>w({...t,confirmPassword:a.target.value}),className:`block w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none text-sm ${t.confirmPassword?m?"border-green-300 focus:ring-green-600":"border-red-300 focus:ring-red-600":"border-gray-300 focus:ring-brand-600"}`,placeholder:s("settings.confirmNewPassword"),required:!0}),e.jsxs("div",{className:"absolute inset-y-0 right-0 pr-12 flex items-center text-sm",children:[t.confirmPassword&&e.jsx("div",{className:"mr-2",children:m?e.jsx(j,{className:"h-5 w-5 text-green-500"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"×"})})}),n.confirm?e.jsx(v,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,confirm:!1})}):e.jsx(k,{className:"h-5 w-5 text-gray-400 cursor-pointer",onClick:()=>d({...n,confirm:!0})})]})]}),t.confirmPassword&&e.jsx("div",{className:"mt-2",children:m?e.jsxs("div",{className:"flex items-center text-green-600 text-xs",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Password cocok"]}):e.jsxs("div",{className:"flex items-center text-red-600 text-xs",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-red-500 flex items-center justify-center mr-1",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"×"})}),"Password tidak cocok"]})})]}),"              ",e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:y||!m||!t.confirmPassword||r.score<3,className:`px-4 py-2 rounded-lg transition-colors text-sm font-medium flex items-center ${y||!m||!t.confirmPassword||r.score<3?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v5l4.5-4.5L20 9l-4.5 4.5L16 12a8 8 0 01-8 8v-5l-4.5 4.5L4 15l4.5-4.5L8 12a8 8 0 010-8V4L3.5 8.5 2 7l4.5-4.5L8 4a8 8 0 018 8h5l-4.5 4.5L15 16l4.5-4.5L20 12a8 8 0 01-8-8z"})]}),"Mengubah Password..."]}):s("settings.changePassword","Change Password")})})]})]})]})]})]})}export{V as default};
