import{j as e}from"./index-Cpum2A6d.js";import{r as c}from"./react-vendor-BzbKlFBU.js";import{$ as W}from"./ui-vendor-CCWSLpt1.js";function M({isOpen:n,onClose:m,onConfirm:u,title:N,message:b,confirmText:j,isDestructive:h=!1,requiresTextConfirmation:p=!1,confirmationText:x=""}){const[o,g]=c.useState("");if(c.useEffect(()=>{n||g("")},[n]),!n)return null;const v=()=>{p&&o!==x||(u(),m())},S=!p||o===x;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:h?e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.96-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})}):e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 whitespace-pre-line",children:b}),p&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:['Ketik "',x,'" untuk konfirmasi:']}),e.jsx("input",{type:"text",value:o,onChange:w=>g(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Ketik "${x}"`})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Batal"}),e.jsxs("button",{onClick:v,disabled:!S,className:`flex-1 px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${h?"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300":"text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300"} disabled:cursor-not-allowed`,children:["            ",j]})]})]})})}function F({isOpen:n,onClose:m,title:u,message:N,type:b}){if(!n)return null;const j=()=>{switch(b){case"success":return e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"error":return e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});case"warning":return e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.96-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:j()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:u}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 whitespace-pre-line",children:N})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{onClick:m,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"OK"})})]})})}const k="http://localhost:5000/api",H=n=>({id:n.id||n.studentId,studentId:n.studentId||n.id,name:n.name||n.userTableName||"Unknown Student",email:n.email||n.userTableEmail||"No email",username:n.username||"N/A",grade:n.grade||(n.tingkat&&n.kelas?`${n.tingkat}${n.kelas}`:"N/A"),academicStatus:n.academicStatus||n.academic_status||"warning",program:n.program||"N/A",mentalHealthScore:n.mentalHealthScore||n.mental_health_score||0,photo:n.photo||n.userTablePhoto||null,isActive:n.isActive,createdAt:n.createdAt,deletedAt:n.deletedAt,userId:n.userId||n.user_id||n.userTableId});function q({onBack:n}={}){const[m,u]=c.useState([]),[N,b]=c.useState(!0),[j,h]=c.useState(null),[p,x]=c.useState(null),[o,g]=c.useState(new Set),[v,S]=c.useState(!1),[w,E]=c.useState({isOpen:!1,studentId:"",studentName:""}),[T,I]=c.useState({isOpen:!1,studentId:"",studentName:""}),[C,D]=c.useState({isOpen:!1,count:0}),[A,f]=c.useState({isOpen:!1,title:"",message:"",type:"success"});c.useEffect(()=>{$()},[]);const $=async()=>{try{b(!0),h(null),console.log("Attempting to fetch deleted students from:",`${k}/admin/students/deleted`);const a=await fetch(`${k}/admin/students/deleted`,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("Response status:",a.status),console.log("Response ok:",a.ok),!a.ok){const s=await a.text();throw console.error("Error response:",s),new Error(`HTTP ${a.status}: ${s||"Failed to fetch deleted students"}`)}const t=await a.json();console.log("Received data:",t);const r=t.map(s=>({id:s.id||s.studentId||s.userId,studentId:s.studentId||s.id,name:s.name||`Student ${s.studentId||s.id}`,email:s.email||"",username:s.username||"",grade:s.grade||(s.tingkat&&s.kelas?`${s.tingkat}${s.kelas}`:""),academicStatus:s.academicStatus||s.academic_status||"warning",academic_status:s.academic_status||s.academicStatus||"warning",program:s.program||"",mentalHealthScore:s.mentalHealthScore||s.mental_health_score||0,mental_health_score:s.mental_health_score||s.mentalHealthScore||0,photo:s.photo||"",isActive:s.isActive||!1,createdAt:s.createdAt,deletedAt:s.deletedAt,userId:s.userId||s.user_id,user_id:s.user_id||s.userId,userTableId:s.userTableId,userTableName:s.userTableName,userTableEmail:s.userTableEmail,userTablePhoto:s.userTablePhoto})),i=r.filter(s=>s.name==="Unknown Student"||s.name&&s.name.startsWith("Student ")||!s.email||!s.userId);if(i.length>0){console.log(`Found ${i.length} students with missing user data, attempting to enrich from users table...`);try{const s=await fetch(`${k}/admin/users/deleted`);if(s.ok){const U=(await s.json()).filter(l=>l.role==="student"),L=new Map;U.forEach(l=>{L.set(l.userId||l.id,l)});const P=r.map(l=>{if(i.includes(l)){const d=L.get(l.studentId);if(d)return{...l,name:d.name||l.name,email:d.email||l.email,username:d.username||l.username,photo:d.photo||l.photo,userId:d.userId||d.id||l.userId,user_id:d.userId||d.id||l.user_id,userTableId:d.userId||d.id,userTableName:d.name,userTableEmail:d.email,userTablePhoto:d.photo}}return l});u(P);const O=P.filter((l,d)=>l.name!==r[d].name||l.email!==r[d].email).length;O>0?h(`Successfully loaded ${P.length} deleted students (${O} enriched with user data)`):h(null)}else u(r),h(null)}catch(s){console.error("Error enriching student data:",s),u(r),h(null)}}else u(r),h(null)}catch(a){console.error("Network error or API unavailable:",a),a instanceof TypeError&&a.message.includes("fetch")?h("Tidak dapat terhubung ke server. Pastikan server backend berjalan di http://localhost:5000"):a instanceof Error?h(`Error: ${a.message}`):h("Terjadi kesalahan yang tidak diketahui"),u([])}finally{b(!1)}},_=async(a,t)=>{try{x(a),console.log("Attempting to restore student:",a);const r=await fetch(`${k}/admin/students/${a}/restore`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!r.ok){const s=await r.text();throw console.error("Restore error:",s),new Error(`HTTP ${r.status}: ${s||"Failed to restore student"}`)}const i=await r.json();console.log("Restore result:",i),u(s=>s.filter(y=>y.studentId!==a)),f({isOpen:!0,title:"Berhasil!",message:`âœ… Siswa ${t} berhasil dipulihkan.`,type:"success"}),E({isOpen:!1,studentId:"",studentName:""})}catch(r){console.error("Error restoring student:",r);let i="Terjadi kesalahan saat memulihkan siswa.";r instanceof TypeError&&r.message.includes("fetch")?i="Tidak dapat terhubung ke server.":r instanceof Error&&(i=r.message),f({isOpen:!0,title:"Error!",message:`âŒ Error: ${i}`,type:"error"})}finally{x(null)}},R=async(a,t)=>{try{x(a),console.log("Attempting to hard delete student:",a);const r=await fetch(`${k}/admin/students/${a}/hard-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok){const s=await r.text();throw console.error("Hard delete error:",s),new Error(`HTTP ${r.status}: ${s||"Failed to permanently delete student"}`)}const i=await r.json();console.log("Hard delete result:",i),u(s=>s.filter(y=>y.studentId!==a)),f({isOpen:!0,title:"Data Dihapus Permanen!",message:`âš ï¸ ${i.message}
${i.warning||""}`,type:"warning"}),I({isOpen:!1,studentId:"",studentName:""})}catch(r){console.error("Error hard deleting student:",r);let i="Terjadi kesalahan saat menghapus siswa permanen.";r instanceof TypeError&&r.message.includes("fetch")?i="Tidak dapat terhubung ke server.":r instanceof Error&&(i=r.message),f({isOpen:!0,title:"Error!",message:`âŒ Error: ${i}`,type:"error"})}finally{x(null)}},B=async()=>{if(o.size!==0)try{S(!0);const a=Array.from(o);console.log("Attempting bulk hard delete for students:",a);const t=await fetch(`${k}/admin/students/bulk-hard-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentIds:a})});if(console.log("Bulk delete response status:",t.status),!t.ok){const i=await t.text();throw console.error("Bulk delete error:",i),new Error(`HTTP ${t.status}: ${i||"Failed to permanently delete students"}`)}const r=await t.json();console.log("Bulk delete result:",r),u(i=>i.filter(s=>!o.has(H(s).studentId))),g(new Set),f({isOpen:!0,title:"Data Dihapus Permanen!",message:`âš ï¸ ${r.message}
${r.warning||""}`,type:"warning"}),D({isOpen:!1,count:0})}catch(a){console.error("Error bulk hard deleting students:",a);let t="Terjadi kesalahan saat menghapus siswa permanen.";a instanceof TypeError&&a.message.includes("fetch")?t="Tidak dapat terhubung ke server. Pastikan server backend berjalan.":a instanceof Error&&(t=a.message),f({isOpen:!0,title:"Error!",message:`âŒ Error: ${t}`,type:"error"})}finally{S(!1)}},z=(a,t)=>{g(r=>{const i=new Set(r);return t?i.add(a):i.delete(a),i})},K=a=>{g(a?new Set(m.map(t=>t.id)):new Set)};return c.useEffect(()=>{console.log("Selected students:",Array.from(o))},[o]),N?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸ—‘ï¸ Manajemen Siswa yang Dihapus"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Memuat data siswa yang dihapus..."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[n&&e.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 shadow-sm transition-colors",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Kembali"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸ—‘ï¸ Manajemen Siswa yang Dihapus"})]}),e.jsx("p",{className:"text-gray-600",children:"Kelola siswa yang telah dihapus (soft delete)"})]}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"        ðŸ”„ Refresh"})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-400 mr-2",children:"âš ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Koneksi Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:j}),e.jsxs("div",{className:"mt-2",children:[e.jsx("button",{onClick:$,className:"text-sm text-red-600 hover:text-red-800 underline",children:"Coba lagi"}),e.jsx("span",{className:"mx-2 text-red-400",children:"|"}),e.jsx("a",{href:"http://localhost:5000/api/test",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-red-600 hover:text-red-800 underline",children:"Test koneksi server"})]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Informasi Soft Delete"}),"            ",e.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Pulihkan"}),": Mengaktifkan kembali siswa yang dihapus"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hapus Permanen"}),": Menghapus data siswa permanen dari database (akun user tetap dipertahankan)"]}),e.jsx("p",{children:"â€¢ Siswa yang dihapus tidak dapat login tetapi data tetap tersimpan untuk audit"})]})]})]})}),"      ",m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tidak ada siswa yang dihapus"}),e.jsx("p",{className:"text-gray-600",children:"Semua siswa dalam keadaan aktif atau telah dipulihkan."})]}):e.jsxs("div",{className:"space-y-4",children:[o.size>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[o.size," siswa dipilih"]}),e.jsx("button",{onClick:()=>g(new Set),className:"text-sm text-blue-600 hover:text-blue-800",children:"Batalkan pilihan"})]}),e.jsxs("button",{onClick:()=>D({isOpen:!0,count:o.size}),disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300 disabled:cursor-not-allowed transition-colors",children:[v?"â³":"ðŸ—‘ï¸"," Hapus Permanen (",o.size,")"]})]})}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:o.size===m.length&&m.length>0,onChange:a=>K(a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Siswa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dihapus"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(a=>{const t=H(a),r=o.has(t.studentId);return e.jsxs("tr",{className:`hover:bg-gray-50 ${r?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:r,onChange:i=>z(t.studentId,i.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.photo?e.jsx("img",{src:t.photo,alt:t.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"ðŸ‘¤"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.studentId]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.email}),t.username&&e.jsx("div",{className:"text-sm text-gray-500",children:t.username})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.grade}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.academicStatus==="good"?"bg-green-100 text-green-800":t.academicStatus==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.academicStatus==="good"?"Baik":t.academicStatus==="warning"?"Perhatian":"Kritis"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.program}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.deletedAt?new Date(t.deletedAt).toLocaleDateString("id-ID"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>E({isOpen:!0,studentId:t.studentId,studentName:t.name}),disabled:p===t.studentId,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-green-300 disabled:cursor-not-allowed transition-colors",children:[p===t.studentId?"â³":"â†©ï¸"," Pulihkan"]}),e.jsxs("button",{onClick:()=>I({isOpen:!0,studentId:t.studentId,studentName:t.name}),disabled:p===t.studentId,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300 disabled:cursor-not-allowed transition-colors",children:[p===t.studentId?"â³":"ðŸ—‘ï¸"," Hapus Permanen"]})]})})]},t.studentId)})})]})})})]}),m.length>0&&e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Total ",m.length," siswa dihapus"]}),e.jsx(M,{isOpen:w.isOpen,onClose:()=>E({isOpen:!1,studentId:"",studentName:""}),onConfirm:()=>_(w.studentId,w.studentName),title:"Konfirmasi Pemulihan Siswa",message:`Apakah Anda yakin ingin memulihkan siswa "${w.studentName}"? Siswa akan menjadi aktif kembali.`,confirmText:"Pulihkan",isDestructive:!1}),"      ",e.jsx(M,{isOpen:T.isOpen,onClose:()=>I({isOpen:!1,studentId:"",studentName:""}),onConfirm:()=>R(T.studentId,T.studentName),title:"Konfirmasi Penghapusan Permanen",message:`PERINGATAN: Anda akan menghapus siswa "${T.studentName}" secara PERMANEN dari database. Semua data akademik siswa (sesi konseling, penilaian kesehatan mental, catatan perilaku) akan ikut terhapus. Namun, akun user akan tetap dipertahankan. Tindakan ini TIDAK DAPAT DIBATALKAN.`,confirmText:"Hapus Permanen",isDestructive:!0,requiresTextConfirmation:!0,confirmationText:"HAPUS PERMANEN"}),"      ",e.jsx(M,{isOpen:C.isOpen,onClose:()=>D({isOpen:!1,count:0}),onConfirm:B,title:"Konfirmasi Penghapusan Permanen Massal",message:`PERINGATAN: Anda akan menghapus ${C.count} siswa secara PERMANEN dari database. Semua data akademik siswa (sesi konseling, penilaian kesehatan mental, catatan perilaku) akan ikut terhapus. Namun, akun user akan tetap dipertahankan. Tindakan ini TIDAK DAPAT DIBATALKAN.`,confirmText:"Hapus Permanen Semua",isDestructive:!0,requiresTextConfirmation:!0,confirmationText:"HAPUS PERMANEN SEMUA"}),e.jsx(F,{isOpen:A.isOpen,onClose:()=>f({isOpen:!1,title:"",message:"",type:"success"}),title:A.title,message:A.message,type:A.type})]})}export{q as default};
